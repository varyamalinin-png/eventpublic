# üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã —Å SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞

SSH –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞:
- ‚úÖ –ü–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã –≤ Security Groups (22, 4000, 8081)
- ‚úÖ SSH –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ VM
- ‚ùå SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (Operation timed out)

## üîç –ü—Ä–∏—á–∏–Ω—ã

### 1. OS Login –≤–∫–ª—é—á–µ–Ω

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö VM —É–∫–∞–∑–∞–Ω–æ `OS_LOGIN`, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- VM –∏—Å–ø–æ–ª—å–∑—É–µ—Ç OS Login –¥–ª—è SSH –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –û–±—ã—á–Ω—ã–µ SSH –∫–ª—é—á–∏ –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –º–æ–≥—É—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å
- –ù—É–∂–Ω—ã –ø—Ä–∞–≤–∞ `compute.osLogin` –∏–ª–∏ `compute.osAdminLogin`

### 2. –°–µ—Ä–∏–π–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–∞

–°–µ—Ä–∏–π–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–æ—Å—Ç—É–ø–∞, –Ω–æ –æ–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–∞.

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: –û—Ç–∫–ª—é—á–∏—Ç—å OS Login (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Yandex Cloud Console](https://console.cloud.yandex.ru)
2. Compute Cloud ‚Üí –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã ‚Üí `event-app-backend`
3. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"–î–æ—Å—Ç—É–ø –ø–æ OS Login"** –∏–ª–∏ **"OS Login"**
4. –ù–∞–∂–º–∏—Ç–µ **"–ó–∞–ø—Ä–µ—Ç–∏—Ç—å"** –∏–ª–∏ **"Disable"**
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
6. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ VM** (–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ‚Üí –ó–∞–ø—É—Å—Ç–∏—Ç—å)
7. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã
8. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ SSH —Å–Ω–æ–≤–∞:

```bash
ssh -i ~/.ssh/yandex-cloud ubuntu@51.250.105.190
```

### –†–µ—à–µ–Ω–∏–µ 2: –í–∫–ª—é—á–∏—Ç—å —Å–µ—Ä–∏–π–Ω—É—é –∫–æ–Ω—Å–æ–ª—å

1. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ VM –Ω–∞–π–¥–∏—Ç–µ **"–°–µ—Ä–∏–π–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å"** –∏–ª–∏ **"Serial Console"**
2. –ù–∞–∂–º–∏—Ç–µ **"–†–∞–∑—Ä–µ—à–∏—Ç—å"** –∏–ª–∏ **"Enable"**
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ VM
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ—Ä–∏–π–Ω—É—é –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞

### –†–µ—à–µ–Ω–∏–µ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OS Login (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OS Login:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–∞–≤–∞ `compute.osLogin`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
yc compute ssh --id epd9ieglfvra51stsh64 --login ubuntu
```

## üîß –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π

### –®–∞–≥ 1: –û—Ç–∫–ª—é—á–∏—Ç—å OS Login

1. –í –≤–µ–±-–∫–æ–Ω—Å–æ–ª–∏ –Ω–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"–î–æ—Å—Ç—É–ø –ø–æ OS Login"**
2. –ù–∞–∂–º–∏—Ç–µ **"–ó–∞–ø—Ä–µ—Ç–∏—Ç—å"**
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å VM

1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ VM
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ VM
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSH

```bash
ssh -i ~/.ssh/yandex-cloud ubuntu@51.250.105.190
```

### –®–∞–≥ 4: –ï—Å–ª–∏ SSH –∑–∞—Ä–∞–±–æ—Ç–∞–ª

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```bash
cd ~/event_app_new/server
sudo systemctl start postgresql
sudo systemctl enable postgresql
npx prisma db push --accept-data-loss
pm2 delete event-app 2>/dev/null || true
pm2 start dist/main.js --name event-app
pm2 save
pm2 status
curl http://localhost:4000/health
```

## üìã –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –í–∫–ª—é—á–∏—Ç—å —Å–µ—Ä–∏–π–Ω—É—é –∫–æ–Ω—Å–æ–ª—å

–ï—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–∫–ª—é—á–∞—Ç—å OS Login:

1. –í–∫–ª—é—á–∏—Ç–µ **"–°–µ—Ä–∏–π–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å"** ‚Üí **"–†–∞–∑—Ä–µ—à–∏—Ç—å"**
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ VM
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ—Ä–∏–π–Ω—É—é –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## ‚úÖ –†–µ–∑—é–º–µ

**–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** OS Login –≤–∫–ª—é—á–µ–Ω, —á—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ–±—ã—á–Ω–æ–µ SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ.

**–†–µ—à–µ–Ω–∏–µ:** –û—Ç–∫–ª—é—á–∏—Ç—å OS Login –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å VM, –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ—Ä–∏–π–Ω—É—é –∫–æ–Ω—Å–æ–ª—å.

**–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ:** SSH –¥–æ–ª–∂–µ–Ω –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å, –∏ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

