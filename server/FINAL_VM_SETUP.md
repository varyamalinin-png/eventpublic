# ‚úÖ –ù–æ–≤–∞—è VM —Å–æ–∑–¥–∞–Ω–∞! –§–∏–Ω–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

## üéâ –£—Å–ø–µ—Ö!

–ù–æ–≤–∞—è VM —Å–æ–∑–¥–∞–Ω–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:
- ‚úÖ SSH –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
- ‚úÖ OS Login –æ—Ç–∫–ª—é—á–µ–Ω (instance-metadata)
- ‚úÖ IP –∞–¥—Ä–µ—Å: **84.201.179.62**

## ‚ö†Ô∏è –í–∞–∂–Ω–æ: –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç—ã –≤ Security Groups

–î–ª—è –Ω–æ–≤–æ–π VM –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç—ã –≤ Security Groups:

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Yandex Cloud Console](https://console.cloud.yandex.ru)
2. VPC ‚Üí Security Groups ‚Üí `default-sg-enphv7p9hmf19tufcjd8`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ—Ç–∫—Ä—ã—Ç—ã –ø–æ—Ä—Ç—ã:
   - **22** (TCP) - –¥–ª—è SSH
   - **4000** (TCP) - –¥–ª—è API
   - **8081** (TCP) - –¥–ª—è Frontend

## üîó –ü–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ—Ä—Ç–æ–≤

–ü–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å:

```bash
ssh -i ~/.ssh/yandex-cloud ubuntu@84.201.179.62
```

## üìã –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```bash
# 1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd ~/event_app_new/server

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É dist
ls -la dist/src/

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å!)
pm2 delete event-app 2>/dev/null || true
pm2 start dist/src/main.js --name event-app
pm2 save

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
pm2 status

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
pm2 logs event-app --lines 20

# 6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API –ª–æ–∫–∞–ª—å–Ω–æ
curl http://localhost:4000/health

# 7. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
pm2 startup systemd -u ubuntu --hp /home/ubuntu
# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä—É—é –≤—ã–¥–∞—Å—Ç PM2, —Å sudo
```

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

- ‚úÖ VM —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ PostgreSQL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ Redis —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ Node.js, npm, PM2 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω
- ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ .env —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–±—Ä–∞–Ω–æ

## üì± –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:
- **API**: http://84.201.179.62:4000
- **Health**: http://84.201.179.62:4000/health

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å –≤ –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏!**

## üîß –í–∞–∂–Ω–æ: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ main.js

–í package.json —É–∫–∞–∑–∞–Ω–æ: `dist/src/main.js` (–Ω–µ `dist/main.js`!)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```bash
pm2 start dist/src/main.js --name event-app
```

