* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

html {
  width: 100%;
  max-width: 100vw;
  overflow-x: hidden;
  background-color: #0f0f0f;
}

/* Для мобильных центрируем контент */
@media (max-width: 767px) {
  html {
    display: flex;
    justify-content: center;
  }
}

body {
  width: 100%;
  margin: 0;
  overflow-x: hidden;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: #0f0f0f;
  color: #fff;
}

/* Для мобильных сохраняем ограничение ширины */
@media (max-width: 767px) {
  body {
    margin: 0 auto;
    max-width: 500px;
  }
}

a {
  color: inherit;
  text-decoration: none;
}

/* React Native Web стили */
#__next {
  height: 100vh;
  width: 100%;
  margin: 0;
  display: flex;
  flex-direction: column;
  background-color: #0f0f0f;
}

/* Для мобильных сохраняем ограничение ширины */
@media (max-width: 767px) {
  #__next {
    margin: 0 auto;
    max-width: 500px;
  }
}

/* Стили для react-native-web TextInput - исправление проблемы с интерактивностью */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
input[type="tel"],
input[type="url"],
textarea {
  pointer-events: auto !important;
  user-select: text !important;
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
  cursor: text !important;
  z-index: 1 !important;
}

/* Убеждаемся, что TextInput из react-native-web работает */
[data-testid="text-input"],
input[class*="TextInput"],
input[class*="text-input"] {
  pointer-events: auto !important;
  user-select: text !important;
  cursor: text !important;
  z-index: 1 !important;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

/* Убираем блокировку взаимодействия с полями ввода */
* {
  -webkit-tap-highlight-color: transparent;
}

/* Убеждаемся, что TouchableOpacity не блокирует клики на input */
button,
[role="button"],
[class*="TouchableOpacity"] {
  cursor: pointer;
  pointer-events: auto !important;
}

/* Исправление для TouchableOpacity на вебе - убеждаемся что клики работают */
div[class*="TouchableOpacity"],
div[class*="touchable-opacity"] {
  pointer-events: auto !important;
  cursor: pointer !important;
  -webkit-tap-highlight-color: transparent;
}

/* Убеждаемся что все интерактивные элементы кликабельны */
button:not(:disabled),
[role="button"]:not([aria-disabled="true"]),
[class*="TouchableOpacity"]:not([disabled]) {
  pointer-events: auto !important;
  cursor: pointer !important;
}

/* Исправляем проблему с фокусом на вебе */
input:focus,
textarea:focus {
  outline: none;
  border-color: #8B5CF6 !important;
}

/* Стили для нижней панели навигации в вебе */
/* КРИТИЧЕСКИЕ СТИЛИ ДЛЯ WEB TAB BAR - всегда видимая панель */
.web-tab-bar,
nav.web-tab-bar,
nav[role="tablist"].web-tab-bar {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  z-index: 99999 !important;
  display: flex !important;
  visibility: visible !important;
  opacity: 1 !important;
  height: 60px !important;
  background-color: #121212 !important;
  border-top: 1px solid #2a2a2a !important;
  width: 100% !important;
  max-width: 500px !important;
  margin: 0 auto !important;
  box-sizing: border-box !important;
  -webkit-transform: translateZ(0) !important;
  transform: translateZ(0) !important;
  -webkit-backface-visibility: hidden !important;
  backface-visibility: hidden !important;
  will-change: transform !important;
}

/* Ограничиваем ширину нижней панели навигации до 500px и центрируем на мобильных */
@media (min-width: 500px) and (max-width: 767px) {
  nav[role="tablist"],
  div[role="tablist"],
  nav[role=tablist],
  div[role=tablist],
  [data-testid="tab-bar"],
  [data-testid=tab-bar],
  [class*="tabBar"],
  [class*="TabBar"],
  [class*="tab-bar"],
  [class*="Tab-Bar"],
  .web-tab-bar {
    max-width: 500px !important;
    width: 500px !important;
    position: fixed !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    bottom: 0 !important;
    box-sizing: border-box !important;
    z-index: 9999 !important;
    display: flex !important;
  }
}

/* На десктопе (>=768px) TabBar должен соответствовать ширине контейнера (640px) */
@media (min-width: 768px) {
  .desktop-three-column-layout .web-tab-bar,
  .desktop-three-column-layout nav.web-tab-bar,
  .desktop-three-column-layout nav[role="tablist"].web-tab-bar {
    max-width: 640px !important;
    width: 640px !important;
    position: fixed !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    bottom: 0 !important;
    box-sizing: border-box !important;
    z-index: 99999 !important;
    display: flex !important;
  }
}

/* На экранах меньше 500px панель занимает всю ширину */
@media (max-width: 499px) {
  nav[role="tablist"],
  div[role="tablist"],
  nav[role=tablist],
  div[role=tablist],
  [data-testid="tab-bar"],
  [data-testid=tab-bar],
  [class*="tabBar"],
  [class*="TabBar"],
  [class*="tab-bar"],
  [class*="Tab-Bar"],
  .web-tab-bar {
    max-width: 100% !important;
    width: 100% !important;
    position: fixed !important;
    left: 0 !important;
    bottom: 0 !important;
    box-sizing: border-box !important;
    z-index: 9999 !important;
    display: flex !important;
    transform: none !important;
  }
}


/* Стили для изображений в MemoryPost на вебе */
/* Исправление для Image из react-native-web */
img[style*="object-fit"],
img[style*="resizeMode"] {
  object-fit: contain !important;
}

/* Дополнительные стили для контейнеров изображений */
[class*="mediaContent"] img,
[style*="mediaContent"] img {
  width: 100% !important;
  height: 100% !important;
  object-fit: contain !important;
  display: block !important;
}


/* Дополнительные стили для изображений в MemoryPost */
div[style*="mediaContent"] img,
div[class*="mediaContent"] img,
img[style*="mediaContent"],
/* Стили для react-native-web Image с mediaContent */
img[style*="width: 100%"],
img[style*="height: 100%"] {
  width: 100% !important;
  height: 100% !important;
  object-fit: contain !important;
  display: block !important;
  max-width: 100% !important;
  max-height: 100% !important;
}

/* Исправление для react-native-web Image с resizeMode */
img[style*="resizeMode: contain"],
img[style*="resizeMode: \"contain\""] {
  object-fit: contain !important;
}

img[style*="resizeMode: cover"],
img[style*="resizeMode: \"cover\""] {
  object-fit: cover !important;
}

/* Критическое исправление для контейнеров с aspectRatio */
/* Исправляем родительские контейнеры (TouchableOpacity, View) внутри контейнеров с aspectRatio */
div[style*="aspectRatio: 0.75"] > div,
div[style*="aspectRatio:0.75"] > div,
div[style*="aspect-ratio: 0.75"] > div,
div[style*="aspect-ratio:0.75"] > div,
div[style*="aspectRatio: 3 / 4"] > div,
div[style*="aspectRatio:3/4"] > div,
div[style*="aspect-ratio: 3 / 4"] > div,
div[style*="aspect-ratio:3/4"] > div {
  height: 100% !important;
  width: 100% !important;
  position: relative !important;
}

/* УБРАНО: Агрессивные правила, которые влияли на все изображения */
/* Теперь изображения в MemoryPost рендерятся через нативный HTML img тег для веба */


/* Стили для условного отображения десктопного и мобильного layout */
/* На десктопе показываем десктопный layout (одноколоночный с ограниченной шириной), скрываем мобильный */
@media (min-width: 768px) {
  .desktop-three-column-layout {
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    width: 100% !important;
    min-height: 100vh !important;
  }
  .mobile-layout {
    display: none !important;
  }
  
  /* Убираем старые стили для трехколоночного layout */
  .desktop-page-container {
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 !important;
    border: none !important;
    min-height: auto;
  }
  
  .desktop-page-wrapper {
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 !important;
  }
}

/* На мобильных показываем мобильный layout, скрываем десктопный */
@media (max-width: 767px) {
  .desktop-three-column-layout {
    display: none !important;
  }
  .mobile-layout {
    display: flex !important;
    flex-direction: column !important;
    width: 100% !important;
    height: 100vh !important;
    position: relative !important;
  }
  
  /* Убеждаемся, что контент не перекрывает нижнюю панель */
  .mobile-layout > *:not(.web-tab-bar):not(nav.web-tab-bar):not([role="tablist"]) {
    flex: 1 !important;
    overflow-y: auto !important;
    padding-bottom: 70px !important; /* Отступ для нижней панели */
  }
  
  /* КРИТИЧЕСКОЕ: Гарантируем видимость WebTabBar на мобильных (особенно для Safari iOS) */
  .mobile-layout .web-tab-bar,
  .mobile-layout nav.web-tab-bar,
  .mobile-layout nav[role="tablist"].web-tab-bar {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 99999 !important;
    width: 100% !important;
    max-width: 500px !important;
    margin-left: auto !important;
    margin-right: auto !important;
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    height: 60px !important;
    background-color: #121212 !important;
    border-top: 1px solid #2a2a2a !important;
    -webkit-transform: translateZ(0) !important;
    transform: translateZ(0) !important;
    -webkit-backface-visibility: hidden !important;
    backface-visibility: hidden !important;
    will-change: transform !important;
  }
  
  /* Дополнительная защита для Safari iOS */
  @supports (-webkit-touch-callout: none) {
    .mobile-layout .web-tab-bar,
    .mobile-layout nav.web-tab-bar,
    .mobile-layout nav[role="tablist"].web-tab-bar {
      position: -webkit-sticky !important;
      position: sticky !important;
      position: fixed !important;
      bottom: 0 !important;
      -webkit-transform: translate3d(0, 0, 0) !important;
      transform: translate3d(0, 0, 0) !important;
    }
  }
  
  /* Специфичные стили для WebTabBar на мобильных - используем класс */
  .web-tab-bar {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 1000 !important;
    width: 100% !important;
    max-width: 500px !important;
    margin-left: auto !important;
    margin-right: auto !important;
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
  
  /* Дополнительное правило для центрирования на экранах больше 500px */
  @media (min-width: 500px) {
    .web-tab-bar {
      left: 50% !important;
      transform: translateX(-50%) !important;
      max-width: 500px !important;
    }
  }
  
  .desktop-page-container {
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 !important;
    border: none !important;
    min-height: auto;
  }
  
  .desktop-page-wrapper {
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 !important;
  }
}
