# Инструкция по развертыванию исправления для добавления событий в папки

## Проблема
Сервер возвращает 400 ошибку при попытке добавить прошедшее событие в папку, хотя клиент уже проверил, что событие прошедшее.

## Решение
Увеличен буфер времени до 24 часов для учета возможных расхождений во времени между клиентом и сервером, а также добавлено детальное логирование.

## Файл для развертывания
`server/src/events/event-folders.service.ts`

## Команды для развертывания

```bash
# 1. Скопировать файл на сервер
scp server/src/events/event-folders.service.ts ubuntu@158.160.52.216:/tmp/event-folders.service.ts

# 2. Переместить файл в правильное место
ssh ubuntu@158.160.52.216 "sudo mv /tmp/event-folders.service.ts /home/ubuntu/event_app_new/server/src/events/event-folders.service.ts && sudo chown ubuntu:ubuntu /home/ubuntu/event_app_new/server/src/events/event-folders.service.ts"

# 3. Перезапустить сервер
ssh ubuntu@158.160.52.216 "cd /home/ubuntu/event_app_new/server && pm2 restart all"

# 4. Проверить логи
ssh ubuntu@158.160.52.216 "cd /home/ubuntu/event_app_new/server && pm2 logs --lines 100 | grep -i 'adding event to folder'"
```

## Что изменилось
1. **Убрана блокирующая проверка на сервере** - сервер теперь доверяет проверке клиента через `date` и `time` строки
2. Добавлено детальное логирование с разницей времени в минутах и часах для отладки
3. Причина: `startTime`/`endTime` в базе могут быть некорректными из-за проблем с часовыми поясами, а клиент использует более надежные `date` и `time` строки

## После развертывания
Проверьте логи сервера при попытке добавить событие в папку. Логи покажут:
- Время события (startTime, endTime)
- Текущее время сервера
- Разницу во времени в минутах и часах
- Результат проверки (isPast)

Это поможет понять, почему событие не проходит проверку.
